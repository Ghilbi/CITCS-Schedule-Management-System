<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Schedule App (Room/Course CRUD)</title>
  <link rel="icon" href="/assets/citcs_logo.png" type="image/png">
  <link rel="shortcut icon" href="/assets/citcs_logo.png" type="image/png">
  <link rel="apple-touch-icon" href="/assets/citcs_logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <!-- SheetJS library for Excel export -->
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
  <!-- ExcelJS for advanced Excel formatting and images -->
  <script src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
</head>
<body>
  <!-- Startup Loading Screen -->
  <div id="startup-loader" class="startup-loader">
    <div class="loader-content">
      <div class="logo-container">
        <img src="/assets/citcs_logo.png" alt="CITCS Logo" class="startup-logo">
        <div class="logo-glow"></div>
      </div>
      <div class="loading-text">
        <h1>Schedule Management System</h1>
        <p>Loading your workspace...</p>
      </div>
      <div class="loading-bar">
        <div class="loading-progress"></div>
      </div>
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div class="startup-particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
  </div>

  <!-- Main Application Content -->
  <div id="main-app" class="main-app">
    <div class="app-container">
      <nav>
        <button id="btn-analytics">Analytics</button>
        <button id="btn-courses">Course Catalog</button>
        <button id="btn-course-offering">Manage Course Offering</button>
        <button id="btn-section-view">Section Management</button>
        <button id="btn-room-view">Room Management</button>
        <button id="btn-schedule-summary">Schedule Summary</button>
        <button id="btn-logout" onclick="logout()" class="delete-btn mt-auto">Logout</button>
      </nav>

      <!-- Dynamically injected sections -->
      <div id="page-sections"></div>
    </div>

    <div id="conflict-popup" class="hidden"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay">
      <div class="spinner"></div>
      <div class="loading-message">Processing...</div>
    </div>

  </div> <!-- End main-app -->

  <!-- Authentication Check -->
  <script>
    // Check authentication before loading the app
    if (!localStorage.getItem('authToken')) {
      window.location.href = 'login.html';
    }
  </script>

  <!-- Load page sections from external fragments -->
  <script src="modules/section-loader.js"></script>

  <!-- modularized start -->
<script src="modules/color-utils.js"></script>
<script src="modules/theme-manager.js"></script>
<script src="modules/globals-utilities.js"></script>
<script src="modules/global-state-manager.js"></script>
<script src="modules/active-curriculum-manager.js"></script>
<script src="modules/startup-animation-controller.js"></script>
<script src="modules/api-wrapper-functions-for-backend-calls.js"></script>
<script src="modules/global-variables-for-room-view-columns.js"></script>
<script src="modules/jwt-expiration-monitor.js"></script>
<script src="modules/navigation.js"></script>
<script src="modules/faculty-section-removed.js"></script>
<script src="modules/courses-crud-with-search-filter-and-sort.js"></script>
<script src="modules/course-offering-crud-with-search-filter-sort-and-trimester-tabs.js"></script>
<script src="modules/loading-overlay-functions.js"></script>
<script src="modules/room-view-trimester-tabs-headers-and-tables.js"></script>
<script src="modules/room-view-modal-open-populate-and-save-with-trimester-filter.js"></script>
<script src="modules/room-management-crud.js"></script>
<script src="modules/section-view-functionality-existing.js"></script>
<script src="modules/new-section-view-trimester-tabs-headers-and-tables.js"></script>
<script src="modules/new-section-view-modal-open-populate-and-save.js"></script>
<script src="modules/enhanced-leclab-interface-functions.js"></script>
<script src="modules/enhanced-leclab-save-functions.js"></script>
<script src="modules/complementary-validation-for-lec-lab-duplicate-check.js"></script>
<script src="modules/conflict-notification-popup.js"></script>
<script src="modules/modal-show-hide.js"></script>
<script src="modules/initial-page-load.js"></script>
<script src="modules/helper-functions.js"></script>
<script src="modules/selective-deletion-modal.js"></script>
<script src="modules/analytics.js"></script>
<!-- modularized end -->
</body>
</html>
