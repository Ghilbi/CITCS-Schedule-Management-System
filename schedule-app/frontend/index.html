<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Schedule App (Room/Course CRUD)</title>
  <link rel="icon" href="/assets/citcs_logo.png" type="image/png">
  <link rel="shortcut icon" href="/assets/citcs_logo.png" type="image/png">
  <link rel="apple-touch-icon" href="/assets/citcs_logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <!-- SheetJS library for Excel export -->
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body>
  <!-- Startup Loading Screen -->
  <div id="startup-loader" class="startup-loader">
    <div class="loader-content">
      <div class="logo-container">
        <img src="/assets/citcs_logo.png" alt="CITCS Logo" class="startup-logo">
        <div class="logo-glow"></div>
      </div>
      <div class="loading-text">
        <h1>Schedule Management System</h1>
        <p>Loading your workspace...</p>
      </div>
      <div class="loading-bar">
        <div class="loading-progress"></div>
      </div>
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div class="startup-particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
  </div>

  <!-- Main Application Content -->
  <div id="main-app" class="main-app">
    <!-- Sidebar toggle button (hamburger) -->
    <button id="nav-toggle" aria-label="Toggle navigation">
      <span></span><span></span><span></span>
    </button>

  <nav>
    <button id="btn-analytics">Analytics</button>
    <button id="btn-courses">Course Catalog</button>
    <button id="btn-course-offering">Manage Course Offering</button>
    <button id="btn-section-view">Section Management</button>
    <button id="btn-room-view">Room Management</button>
    <button id="btn-schedule-summary">Schedule Summary</button>
    <button id="btn-logout" onclick="logout()" class="delete-btn" style="margin-top: auto;">Logout</button>
  </nav>

  <section id="section-courses" class="hidden">
    <h2>Course Catalog</h2>
    <div class="top-button-container">
      <button id="btn-add-course" class="add-btn">Add New Course</button>
    </div>
    <div class="button-container">
      <button id="btn-import-csv" class="import-btn">Import CSV</button>
      <button id="btn-export-csv" class="export-btn">Export CSV</button>
      <button id="btn-clear-courses" class="delete-btn">Manage Course Deletion</button>
    </div>
    <input type="file" id="csv-file-input" accept=".csv" style="display: none;" />
    <!-- Search Bar - Always Visible -->
    <div class="search-container">
      <input type="text" id="course-search" placeholder="Search courses..." />
    </div>
    
    <!-- Collapsible Filters Container - Left Aligned -->
    <div class="filters-container">
      <button id="filter-toggle-btn" class="filter-toggle-btn">
        <span class="filter-icon">üîç</span>
        <span class="filter-text">Show Filters</span>
        <span class="filter-arrow">‚ñº</span>
      </button>
      <div id="filter-section" class="filter-section collapsed">
        <div class="filter-row">
          <select id="course-filter-year-level">
            <option value="">Filter by Year Level</option>
            <option value="1st yr">1st Year</option>
            <option value="2nd yr">2nd Year</option>
            <option value="3rd yr">3rd Year</option>
          </select>
          <select id="course-filter-degree">
            <option value="">Filter by Degree</option>
            <option value="BSIT">BSIT</option>
            <option value="BSIT(Webtech)">BSIT(Webtech)</option>
            <option value="BSIT(NetSec)">BSIT(NetSec)</option>
            <option value="BSIT(ERP)">BSIT(ERP)</option>
            <option value="BSCS">BSCS</option>
            <option value="BSDA">BSDA</option>
            <option value="BMMA">BMMA</option>
          </select>
          <select id="course-filter-trimester">
            <option value="">Filter by Trimester</option>
            <option value="1st Trimester">1st Trimester</option>
            <option value="2nd Trimester">2nd Trimester</option>
            <option value="3rd Trimester">3rd Trimester</option>
          </select>
        </div>
        <div class="filter-row">
          <select id="course-filter-curriculum">
            <option value="">Filter by Curriculum</option>
            <option value="2024-2025">2024-2025</option>
            <option value="2023-2024">2023-2024</option>
            <option value="2022-2023">2022-2023</option>
            <option value="2021-2022">2021-2022</option>
            <option value="2020-2021">2020-2021</option>
          </select>
          <select id="course-sort">
            <option value="">Sort by</option>
            <option value="subject-asc">Subject (A-Z)</option>
            <option value="subject-desc">Subject (Z-A)</option>
            <option value="units-asc">Units (Low-High)</option>
            <option value="units-desc">Units (High-Low)</option>
          </select>
        </div>
      </div>
    </div>
    <table id="table-courses">
      <thead>
        <tr>
          <th>ID</th>
          <th>Subject</th>
          <th>Unit Category</th>
          <th>Units</th>
          <th>Year Level</th>
          <th>Degree</th>
          <th>Trimester</th>
          <th>Curriculum</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="section-course-offering" class="hidden">
    <h2>Manage Course Offering</h2>
    <div class="button-container">
      <button id="btn-add-courseOffering" class="add-btn">Add New Course Offering</button>
      <button id="btn-clear-courseOffering" class="delete-btn">Clear All Offerings</button>
    </div>
    <div class="trimester-tabs">
      <button class="tab-btn active" data-trimester="1st Trimester">1st Trimester</button>
      <button class="tab-btn" data-trimester="2nd Trimester">2nd Trimester</button>
      <button class="tab-btn" data-trimester="3rd Trimester">3rd Trimester</button>
    </div>
    <div class="controls">
      <input type="text" id="offering-search" placeholder="Search offerings..." />
      <select id="offering-filter-type">
        <option value="">Filter by Type</option>
        <option value="Lec">Lec</option>
        <option value="Lab">Lab</option>
        <option value="PureLec">PureLec</option>
      </select>
      <select id="offering-sort">
        <option value="">Sort by</option>
        <option value="course-asc">Course (A-Z)</option>
        <option value="course-desc">Course (Z-A)</option>
        <option value="section-asc">Section (A-Z)</option>
        <option value="section-desc">Section (Z-A)</option>
      </select>
    </div>
    <table id="table-courseOffering">
      <thead>
        <tr>
          <th>ID</th>
          <th>Course ID</th>
          <th>Section</th>
          <th>Type</th>
          <th>Units</th>
          <th>Trimester</th>
          <th>Degree</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="section-section-view" class="hidden">
    <h2>Section Management</h2>
    <div class="trimester-tabs">
      <button class="tab-btn active" data-trimester="1st Trimester">1st Trimester</button>
      <button class="tab-btn" data-trimester="2nd Trimester">2nd Trimester</button>
      <button class="tab-btn" data-trimester="3rd Trimester">3rd Trimester</button>
    </div>
    <div class="year-level-tabs">
      <button class="year-tab-btn active" data-year="1st yr">1st Year</button>
      <button class="year-tab-btn" data-year="2nd yr">2nd Year</button>
      <button class="year-tab-btn" data-year="3rd yr">3rd Year</button>
    </div>
    <div id="section-view-container">
      <button id="btn-remove-all-schedules" class="remove-all-btn-small">
        <span class="btn-icon">üóëÔ∏è</span>
        <span class="btn-text">Clear All</span>
      </button>
    </div>
  </section>

  <section id="section-room-view" class="hidden">
    <h2>Room Management</h2>
    <button id="btn-manage-rooms" class="add-btn">Manage Rooms</button>
    <div class="trimester-tabs">
      <button class="tab-btn active" data-trimester="1st Trimester">1st Trimester</button>
      <button class="tab-btn" data-trimester="2nd Trimester">2nd Trimester</button>
      <button class="tab-btn" data-trimester="3rd Trimester">3rd Trimester</button>
    </div>
    <div class="year-level-tabs">
      <button class="year-tab-btn active" data-year="1st yr">1st Year</button>
      <button class="year-tab-btn" data-year="2nd yr">2nd Year</button>
      <button class="year-tab-btn" data-year="3rd yr">3rd Year</button>
    </div>

    <!-- MWF ROOM MANAGEMENT -->
    <h3>MWF Room Management</h3>
    <div class="table-container">
      <table class="schedule-table" id="room-view-mwf-table">
        <thead id="room-view-mwf-thead"></thead>
        <tbody id="room-view-mwf-tbody"></tbody>
      </table>
    </div>
    <!-- TTHS ROOM MANAGEMENT -->
    <h3>TTHS Room Management</h3>
    <div class="table-container">
      <table class="schedule-table" id="room-view-tths-table">
        <thead id="room-view-tths-thead"></thead>
        <tbody id="room-view-tths-tbody"></tbody>
      </table>
    </div>
  </section>

  <section id="section-schedule-summary" class="hidden">
    <h2>Schedule Summary</h2>
    <div class="trimester-tabs">
      <button class="tab-btn active" data-trimester="1st Trimester">1st Trimester</button>
      <button class="tab-btn" data-trimester="2nd Trimester">2nd Trimester</button>
      <button class="tab-btn" data-trimester="3rd Trimester">3rd Trimester</button>
    </div>
    <div class="year-level-tabs">
      <button class="year-tab-btn active" data-year="1st yr">1st Year</button>
      <button class="year-tab-btn" data-year="2nd yr">2nd Year</button>
      <button class="year-tab-btn" data-year="3rd yr">3rd Year</button>
    </div>
    <div class="section-filter">
      <label for="summary-section-filter">Filter by Section:</label>
      <select id="summary-section-filter">
        <option value="">All Sections</option>
      </select>
    </div>
    <div class="export-container">
      <button id="btn-export-excel" class="add-btn">Export All Schedules to Excel</button>
    </div>
    <div id="schedule-summary-content"></div>
  </section>

  <section id="section-analytics" class="hidden">
    <h2>Analytics</h2>
    <div class="analytics-controls">
      <button id="btn-refresh-analytics" class="add-btn">Refresh Data</button>
    </div>
    
    <!-- Statistics Cards -->
    <div class="analytics-stats">
      <div class="stat-card">
        <div class="stat-icon">üìö</div>
        <div class="stat-content">
          <h3 id="stat-total-courses">0</h3>
          <p>Total Courses</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üìã</div>
        <div class="stat-content">
          <h3 id="stat-total-offerings">0</h3>
          <p>Course Offerings</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üóìÔ∏è</div>
        <div class="stat-content">
          <h3 id="stat-total-schedules">0</h3>
          <p>Scheduled Sessions</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üè´</div>
        <div class="stat-content">
          <h3 id="stat-total-rooms">0</h3>
          <p>Total Rooms</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üìñ</div>
        <div class="stat-content">
          <h3 id="stat-total-curricula">0</h3>
          <p>Curricula</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-content">
          <h3 id="stat-room-utilization">0%</h3>
          <p>Room Utilization</p>
        </div>
      </div>
    </div>
    
    <!-- Charts Section -->
    <div class="analytics-charts">
      <div class="chart-row">
        <div class="chart-container">
          <div id="chart-degree-distribution" class="chart"></div>
        </div>
        <div class="chart-container">
          <div id="chart-trimester-distribution" class="chart"></div>
        </div>
      </div>
      <div class="chart-row">
        <div class="chart-container">
          <div id="chart-offering-type" class="chart"></div>
        </div>
        <div class="chart-container">
          <div id="chart-room-utilization" class="chart"></div>
        </div>
      </div>
      <div class="chart-row">
        <div class="chart-container">
          <div id="chart-year-level" class="chart"></div>
        </div>
      </div>
    </div>

    <!-- Predictive Analytics -->
    <div id="predictive-analytics" class="analytics-charts" style="margin-top: 24px;">
      <div class="chart-container">
        <div class="collapsible-header" onclick="togglePredictiveAnalytics()">
          <h3 style="margin:0; display: flex; align-items: center; gap: 8px; cursor: pointer;">
            <span id="predictive-toggle-icon" class="toggle-icon">‚ñº</span>
            Predictive Analytics
          </h3>
        </div>
        <div id="predictive-content" class="collapsible-content">
        <p style="margin:0 0 16px 0; color: var(--color-muted);">Estimate required sections per course based on students.</p>
        <div class="filter-row" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 12px;">
          <div>
            <label for="predict-degree" class="enhanced-label"><span class="label-icon">üéì</span>Degree</label>
            <select id="predict-degree">
              <option value="">Select Degree</option>
              <option value="BSIT">BSIT</option>
              <option value="BSIT(Webtech)">BSIT(Webtech)</option>
              <option value="BSIT(NetSec)">BSIT(NetSec)</option>
              <option value="BSIT(ERP)">BSIT(ERP)</option>
              <option value="BSCS">BSCS</option>
              <option value="BSDA">BSDA</option>
              <option value="BMMA">BMMA</option>
            </select>
          </div>
          <div>
            <label for="predict-year" class="enhanced-label"><span class="label-icon">üìò</span>Year Level</label>
            <select id="predict-year">
              <option value="">Select Year</option>
              <option value="1st yr">1st Year</option>
              <option value="2nd yr">2nd Year</option>
              <option value="3rd yr">3rd Year</option>
            </select>
          </div>
          <div>
            <label for="predict-trimester" class="enhanced-label"><span class="label-icon">üìÖ</span>Trimester</label>
            <select id="predict-trimester">
              <option value="">Select Trimester</option>
              <option value="1st Trimester">1st Trimester</option>
              <option value="2nd Trimester">2nd Trimester</option>
              <option value="3rd Trimester">3rd Trimester</option>
            </select>
          </div>
        </div>
        <div class="filter-row" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; align-items: end;">
          <div>
            <label for="predict-students" class="enhanced-label"><span class="label-icon">üë•</span>Number of Students</label>
            <input type="number" id="predict-students" min="1" placeholder="e.g., 120" />
          </div>
          <div>
            <label for="predict-capacity" class="enhanced-label"><span class="label-icon">üè´</span>Section Capacity</label>
            <input type="number" id="predict-capacity" min="1" value="35" />
          </div>
          <div>
            <button id="btn-compute-prediction" class="add-btn">Compute Prediction</button>
          </div>
        </div>

        <div id="predictive-summary" style="margin: 12px 0; color: var(--color-text);"></div>

        <div class="chart-container" style="margin-top: 12px;">
          <div id="predictive-results" class="chart" style="min-height: auto;">
            <table id="predictive-results-table" style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr>
                  <th style="text-align:left; padding:8px; border-bottom:1px solid var(--color-border);">Subject</th>
                  <th style="text-align:left; padding:8px; border-bottom:1px solid var(--color-border);">Unit Category</th>
                  <th style="text-align:right; padding:8px; border-bottom:1px solid var(--color-border);">Predicted Sections</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        </div>
      </div>
    </div>
  </section>

  <div id="conflict-popup" class="hidden"></div>

  <div class="modal hidden" id="modal-course">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-course">√ó</span>
      <h3 id="modal-course-title">Add/Edit Course</h3>
      <label for="course-subject">Subject:</label>
      <input type="text" id="course-subject" />
      <label>Unit Category:</label>
      <div class="radio-group">
        <label for="purelec"><input type="radio" id="purelec" name="unitCategory" value="PureLec" checked /> PureLec</label>
        <label for="leclab"><input type="radio" id="leclab" name="unitCategory" value="Lec/Lab" /> Lec/Lab</label>
      </div>
      <label for="course-units">Units:</label>
      <input type="text" id="course-units" />
      <label>Year Level:</label>
      <div class="radio-group">
        <label for="year-1st"><input type="radio" id="year-1st" name="yearLevel" value="1st yr" checked /> 1st yr</label>
        <label for="year-2nd"><input type="radio" id="year-2nd" name="yearLevel" value="2nd yr" /> 2nd yr</label>
        <label for="year-3rd"><input type="radio" id="year-3rd" name="yearLevel" value="3rd yr" /> 3rd yr</label>
      </div>
      <label for="course-degree">Degree:</label>
      <select id="course-degree">
        <option value="BSIT">BSIT</option>
        <option value="BSIT(Webtech)">BSIT(Webtech)</option>
        <option value="BSIT(NetSec)">BSIT(NetSec)</option>
        <option value="BSIT(ERP)">BSIT(ERP)</option>
        <option value="BSCS">BSCS</option>
        <option value="BSDA">BSDA</option>
        <option value="BMMA">BMMA</option>
      </select>
      <label for="course-trimester">Trimester:</label>
      <select id="course-trimester">
        <option value="1st Trimester">1st Trimester</option>
        <option value="2nd Trimester">2nd Trimester</option>
        <option value="3rd Trimester">3rd Trimester</option>
      </select>
      <label for="course-curriculum">Curriculum:</label>
      <select id="course-curriculum">
        <option value="2024-2025">2024-2025</option>
        <option value="2023-2024">2023-2024</option>
        <option value="2022-2023">2022-2023</option>
        <option value="2021-2022">2021-2022</option>
        <option value="2020-2021">2020-2021</option>
      </select>
      <div class="curriculum-manage-container">
        <button id="btn-manage-curriculum" class="action-edit-btn" style="margin-top: 5px; font-size: 12px; padding: 4px 8px;">Manage Curricula</button>
      </div>
      <label for="course-description">Description:</label>
      <textarea id="course-description" rows="4" placeholder="Enter course description"></textarea>
      <input type="hidden" id="course-id" />
      <button id="btn-save-course" class="save-btn">Save</button>
    </div>
  </div>

  <!-- Curriculum Management Modal -->
  <div class="modal hidden" id="modal-curriculum-management">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-curriculum-management">√ó</span>
      <h3>Manage Curricula</h3>
      <div class="curriculum-controls">
        <button id="btn-add-curriculum" class="add-btn">Add New Curriculum</button>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>Curriculum Year</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="curriculum-table-body">
            <!-- Curriculum rows will be populated here -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Add/Edit Curriculum Modal -->
  <div class="modal hidden" id="modal-add-edit-curriculum">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-add-edit-curriculum">√ó</span>
      <h3 id="modal-curriculum-title">Add Curriculum</h3>
      <label for="curriculum-year">Curriculum Year:</label>
      <input type="text" id="curriculum-year" placeholder="e.g., 2025-2026" />
      <input type="hidden" id="curriculum-id" />
      <div class="modal-buttons">
        <button id="btn-save-curriculum" class="save-btn">Save</button>
        <button id="btn-cancel-curriculum" class="cancel-btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- New Modal for Section Management Added -->
  <div class="modal hidden" id="modal-sectionview">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-sectionview">√ó</span>
      <h3 id="modal-sectionview-title">Assign Course Offering to Section</h3>
      <input type="hidden" id="sectionview-id" />
      <input type="hidden" id="sectionview-dayType" />
      <input type="hidden" id="sectionview-time" />
      <input type="hidden" id="sectionview-section" />
      <label for="sectionview-courseOffering">Course Offering:</label>
      <select id="sectionview-courseOffering">
        <option value="">-- Select Course Offering --</option>
      </select>
      <label for="sectionview-section2">Section 2 (Optional):</label>
      <select id="sectionview-section2">
        <option value="">-- Select Section --</option>
      </select>
      
      <!-- Enhanced LecLab Assignment Section - Simplified UI -->
      <div id="leclab-assignment-section" class="leclab-assignment-section" style="display: none;">
        <h4>Lecture/Lab Assignment</h4>
        
        <!-- Assignment Mode Selection - Only separate assignment -->
        <div class="assignment-mode-selection" style="display: none;">
          <div class="radio-group">
            <label><input type="radio" name="assignmentMode" value="separate" checked> Assign to different time slots</label>
          </div>
        </div>
        
        <!-- Combined Assignment (hidden) -->
        <div id="combined-assignment" class="assignment-option" style="display: none;">
          <p class="info-text">Both Lecture and Lab components will be assigned to the current time slot.</p>
        </div>
        
        <!-- Separate Assignment (default) -->
        <div id="separate-assignment" class="assignment-option">
          <!-- Room Group Selection for Lec/Lab Assignment -->
          <div class="room-group-filter">
            <div class="radio-group room-group-radio">
              <label for="leclab-room-group-a"><input type="radio" id="leclab-room-group-a" name="leclab-roomGroup" value="A" checked> Group A</label>
              <label for="leclab-room-group-b"><input type="radio" id="leclab-room-group-b" name="leclab-roomGroup" value="B"> Group B</label>
            </div>
          </div>
          
          <div class="component-assignment">
            <div class="lec-assignment">
              <h5>Lecture Component</h5>
              <label for="lec-day">Day:</label>
              <select id="lec-day">
                <option value="MWF">MWF</option>
                <option value="TTHS">TTHS</option>
              </select>
              <label for="lec-time">Time:</label>
              <select id="lec-time">
                <!-- Populated dynamically -->
              </select>
              <label for="lec-room">Room:</label>
              <select id="lec-room">
                <option value="">-- Select Room --</option>
                <!-- Populated dynamically -->
              </select>
            </div>
            
            <div class="lab-assignment">
              <h5>Lab Component</h5>
              <label for="lab-day">Day:</label>
              <select id="lab-day">
                <option value="MWF">MWF</option>
                <option value="TTHS">TTHS</option>
              </select>
              <label for="lab-time">Time:</label>
              <select id="lab-time">
                <!-- Populated dynamically -->
              </select>
              <label for="lab-room">Room:</label>
              <select id="lab-room">
                <option value="">-- Select Room --</option>
                <!-- Populated dynamically -->
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <div class="room-assignment-section" style="display: none;">
        <h4>Room Assignment</h4>
        <div class="room-group-filter">
          <div class="radio-group room-group-radio">
            <label for="room-group-a"><input type="radio" id="room-group-a" name="roomGroup" value="A" checked> Group A</label>
            <label for="room-group-b"><input type="radio" id="room-group-b" name="roomGroup" value="B"> Group B</label>
          </div>
        </div>
        <label for="sectionview-room">Select Room:</label>
        <select id="sectionview-room">
          <option value="">-- Select Room --</option>
        </select>
      </div>
      
      <button id="btn-save-sectionview" class="save-btn">Save</button>
      <button id="btn-delete-sectionview" class="delete-btn" style="display: none;">Delete</button>
    </div>
  </div>

  <div class="modal hidden" id="modal-roomview">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-roomview">√ó</span>
      <h3 id="modal-roomview-title">Assign Course Offering</h3>
      <input type="hidden" id="roomview-id" />
      <input type="hidden" id="roomview-dayType" />
      <input type="hidden" id="roomview-time" />
      <input type="hidden" id="roomview-col" />
      <input type="hidden" id="roomview-roomId" />
      <label for="roomview-course">Course Offering:</label>
      <select id="roomview-course">
        <option value="">-- Select Course Offering --</option>
      </select>
      <label for="roomview-section">Section 1:</label>
      <select id="roomview-section">
        <option value="">-- Select Section --</option>
      </select>
      <label for="roomview-section2">Section 2 (Optional):</label>
      <select id="roomview-section2">
        <option value="">-- Select Section --</option>
      </select>
      <button id="btn-save-roomview" class="save-btn">Save</button>
      <button id="btn-delete-roomview" class="delete-btn" style="display: none;">Delete</button>
    </div>
  </div>

  <div class="modal hidden" id="modal-manage-rooms">
    <div class="modal-content" style="width: 500px;">
      <span class="close-button" data-close-modal="modal-manage-rooms">√ó</span>
      <h3>Manage Rooms</h3>
      <button id="btn-add-room" class="add-btn" style="margin-bottom: 20px;">Add New Room</button>
      <table id="table-rooms">
        <thead>
          <tr>
            <th>ID</th>
            <th>Room Name</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="modal hidden" id="modal-add-room">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-add-room">√ó</span>
      <h3 id="modal-room-title">Add New Room</h3>
      <label for="room-name">Room Name (letters and numbers only):</label>
      <input type="text" id="room-name" placeholder="e.g., M308" pattern="[A-Za-z0-9]+" title="Only letters and numbers allowed" />
      <p class="info-text">Room names should only contain letters and numbers, no spaces or special characters.</p>
      <input type="hidden" id="room-id" />
      <button id="btn-save-room" class="save-btn">Save</button>
    </div>
  </div>
  
  <div class="modal hidden" id="modal-course-offering">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-course-offering">√ó</span>
      <h3 id="modal-course-offering-title">Add/Edit Course Offering</h3>
      
      <!-- Enhanced introduction section -->
      <div class="modal-intro">
        <p class="modal-description">Choose how you want to add course offerings to your schedule:</p>
      </div>
      
      <div class="modal-tabs enhanced-tabs">
        <button class="modal-tab-btn active" data-tab="manual">
          <span class="tab-icon">üìù</span>
          <span class="tab-title">Manual Add</span>
          <span class="tab-subtitle">Add individual course offerings</span>
        </button>
        <button class="modal-tab-btn" data-tab="bulk">
          <span class="tab-icon">üìö</span>
          <span class="tab-title">Bulk Add</span>
          <span class="tab-subtitle">Add multiple courses at once</span>
        </button>
      </div>
      
      <div id="manual-add-section" class="modal-tab-content">
        <div class="manual-intro">
          <h4 class="manual-section-title">‚úèÔ∏è Manual Course Addition</h4>
          <p class="manual-description">Add individual course offerings with precise control over each section. Perfect for specific course scheduling and detailed customization.</p>
        </div>
        
        <div class="manual-form-section">
          <label for="courseOffering-degree" class="enhanced-label">
            <span class="label-icon">üéì</span>
            Filter by Degree:
          </label>
          <select id="courseOffering-degree">
            <option value="">All Degrees</option>
            <option value="BSIT">BSIT - Bachelor of Science in Information Technology</option>
            <option value="BSIT(Webtech)">BSIT(Webtech) - Web Technology Specialization</option>
            <option value="BSIT(NetSec)">BSIT(NetSec) - Network Security Specialization</option>
            <option value="BSIT(ERP)">BSIT(ERP) - Enterprise Resource Planning Specialization</option>
            <option value="BSCS">BSCS - Bachelor of Science in Computer Science</option>
            <option value="BSDA">BSDA - Bachelor of Science in Data Analytics</option>
            <option value="BMMA">BMMA - Bachelor of Multimedia Arts</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="enhanced-label">
            <span class="label-icon">üìÖ</span>
            Filter by Trimester:
          </label>
          <div class="radio-group trimester-radio-group">
            <label for="manual-trim-all"><input type="radio" id="manual-trim-all" name="manualTrimester" value="" checked>All Trimesters</label>
            <label for="manual-trim-1"><input type="radio" id="manual-trim-1" name="manualTrimester" value="1st Trimester">1st Trimester</label>
            <label for="manual-trim-2"><input type="radio" id="manual-trim-2" name="manualTrimester" value="2nd Trimester">2nd Trimester</label>
            <label for="manual-trim-3"><input type="radio" id="manual-trim-3" name="manualTrimester" value="3rd Trimester">3rd Trimester</label>
          </div>
        </div>
        <div class="course-selection-section">
          <label for="courseOffering-course" class="enhanced-label">
            <span class="label-icon">üìñ</span>
            Select Course:
          </label>
          <select id="courseOffering-course">
            <option value="">-- Select Course --</option>
          </select>
        </div>
        <div class="section-input-group">
          <label>Section:</label>
          <div class="section-inputs">
            <div class="section-year-select">
              <label for="courseOffering-year">Year:</label>
              <select id="courseOffering-year">
                <option value="1">First Year (1)</option>
                <option value="2">Second Year (2)</option>
                <option value="3">Third Year (3)</option>
                <option value="INTERNATIONAL">INTERNATIONAL</option>
              </select>
            </div>
            <div class="section-letter-input">
              <label for="courseOffering-section-letter">Letter:</label>
              <input type="text" id="courseOffering-section-letter" placeholder="e.g., A" maxlength="1" />
            </div>
          </div>
          <div class="section-preview">
            <span>Section code: </span><strong id="section-code-preview">1A</strong>
          </div>
          <input type="hidden" id="courseOffering-section" />
        </div>
        <label>Type:</label>
        <div class="radio-group" id="courseOffering-type-group">
          <label id="label-lec" style="display:none;"><input type="radio" id="courseOffering-lec" name="courseOfferingType" value="Lec" /> Lec</label>
          <label id="label-lab" style="display:none;"><input type="radio" id="courseOffering-lab" name="courseOfferingType" value="Lab" /> Lab</label>
          <label id="label-purelec" style="display:none;"><input type="radio" id="courseOffering-purelec" name="courseOfferingType" value="PureLec" /> PureLec</label>
        </div>
        <label for="courseOffering-units">Units:</label>
        <input type="text" id="courseOffering-units" readonly />
        <label for="courseOffering-trimester">Trimester:</label>
        <input type="text" id="courseOffering-trimester" readonly />
        <input type="hidden" id="courseOffering-id" />
        <input type="hidden" id="courseOffering-selected-degree" />
      </div>
      
      <div id="bulk-add-section" class="modal-tab-content" style="display: none;">
        <div class="bulk-intro">
          <h4 class="bulk-section-title">üöÄ Bulk Course Addition</h4>
          <p class="bulk-description">Quickly add all courses for an entire degree program and year level. This feature automatically creates course offerings for multiple sections at once, saving you time when setting up schedules.</p>
        </div>
        
        <div class="bulk-form-section">
          <label for="courseOffering-degree-bulk" class="enhanced-label">
            <span class="label-icon">üéì</span>
            Select Degree Program:
          </label>
          <select id="courseOffering-degree-bulk" class="bulk-degree-select">
            <option value="">Choose a degree program to get started</option>
            <option value="BSIT">BSIT - Bachelor of Science in Information Technology</option>
            <option value="BSIT(Webtech)">BSIT(Webtech) - Web Technology Specialization</option>
            <option value="BSIT(NetSec)">BSIT(NetSec) - Network Security Specialization</option>
            <option value="BSIT(ERP)">BSIT(ERP) - Enterprise Resource Planning Specialization</option>
            <option value="BSCS">BSCS - Bachelor of Science in Computer Science</option>
            <option value="BSDA">BSDA - Bachelor of Science in Data Analytics</option>
            <option value="BMMA">BMMA - Bachelor of Multimedia Arts</option>
          </select>
        </div>
        <div class="filter-controls enhanced-filters">
          <div class="filter-group">
            <label class="enhanced-label">
              <span class="label-icon">üìä</span>
              Target Year Level:
            </label>
            <div class="radio-group year-radio-group">
              <label for="year-1st-bulk"><input type="radio" id="year-1st-bulk" name="bulkAddYearLevel" value="1st yr" checked> 1st Year</label>
              <label for="year-2nd-bulk"><input type="radio" id="year-2nd-bulk" name="bulkAddYearLevel" value="2nd yr"> 2nd Year</label>
              <label for="year-3rd-bulk"><input type="radio" id="year-3rd-bulk" name="bulkAddYearLevel" value="3rd yr"> 3rd Year</label>
            </div>
            <p class="filter-help-text">Select which year level courses to add</p>
          </div>
          <div class="filter-group">
            <label class="enhanced-label">
              <span class="label-icon">üìÖ</span>
              Academic Trimester:
            </label>
            <div class="radio-group trimester-radio-group">
              <label for="trim-1"><input type="radio" id="trim-1" name="bulkAddTrimester" value="1st Trimester" checked>1st Trimester</label>
              <label for="trim-2"><input type="radio" id="trim-2" name="bulkAddTrimester" value="2nd Trimester">2nd Trimester</label>
              <label for="trim-3"><input type="radio" id="trim-3" name="bulkAddTrimester" value="3rd Trimester">3rd Trimester</label>
            </div>
            <p class="filter-help-text">Choose the trimester for course scheduling</p>
          </div>
        </div>
        <div class="bulk-section-input-group enhanced-section-input">
          <label class="enhanced-label">
            <span class="label-icon">üè∑Ô∏è</span>
            Section Configuration:
          </label>
          <div class="section-letter-input bulk-letters">
            <label for="courseOffering-section-letters" class="sub-label">Section Letters (ranges or comma-separated):</label>
            <input type="text" id="courseOffering-section-letters" placeholder="e.g., A-D or A,B,C" value="A">
            <div class="input-help">
              <p class="info-text">üí° <strong>Examples:</strong></p>
              <ul class="example-list">
                <li><code>A</code> - Creates section 1A</li>
                <li><code>A,B,C</code> - Creates sections 1A, 1B, 1C</li>
                <li><code>A-D</code> - Creates sections 1A, 1B, 1C, 1D</li>
              </ul>
            </div>
          </div>
          <div class="section-preview bulk-preview enhanced-preview">
            <span class="preview-label">üìã Generated section codes: </span><strong id="bulk-section-code-preview">1A</strong>
            <p class="info-text">The year prefix will be automatically added based on your Year Level selection above</p>
          </div>
          <input type="hidden" id="courseOffering-multiple-sections" value="1A">
        </div>
        <div class="bulk-action-section">
          <button id="btn-add-all-courses" class="action-btn enhanced-action-btn">
            <span class="btn-icon">‚ö°</span>
            Add All Courses for Selected Degree
            <span class="btn-subtitle">This will create course offerings for all courses in the selected degree, year level, and trimester</span>
          </button>
        </div>
      </div>
      
      <button id="btn-save-courseOffering" class="save-btn">Save</button>
    </div>
  </div>

  <!-- Schedule Summary Modal removed - now using section-based approach -->

  <!-- Login Modal Removed - Now using dedicated login page -->

  <!-- Selective Course Deletion Modal -->
  <div class="modal hidden" id="modal-selective-deletion">
    <div class="modal-content">
      <span class="close-button" data-close-modal="modal-selective-deletion">√ó</span>
      <h3 id="modal-selective-deletion-title">Course Deletion Manager</h3>
      <p class="modal-description">Choose what you want to delete. This action cannot be undone.</p>
      
      <div class="deletion-options">
        <div class="deletion-option" data-deletion-type="all">
          <div class="option-icon">üóëÔ∏è</div>
          <div class="option-content">
            <h4>Delete All Courses</h4>
            <p>Remove all courses, course offerings, and schedules from the system</p>
          </div>
        </div>
        
        <div class="deletion-option" data-deletion-type="year-level">
          <div class="option-icon">üìö</div>
          <div class="option-content">
            <h4>Delete by Year Level</h4>
            <p>Remove all courses for a specific year level</p>
          </div>
        </div>
        
        <div class="deletion-option" data-deletion-type="trimester">
          <div class="option-icon">üìÖ</div>
          <div class="option-content">
            <h4>Delete by Trimester</h4>
            <p>Remove all courses for a specific trimester</p>
          </div>
        </div>
        
        <div class="deletion-option" data-deletion-type="degree">
          <div class="option-icon">üéì</div>
          <div class="option-content">
            <h4>Delete by Degree</h4>
            <p>Remove all courses for a specific degree program</p>
          </div>
        </div>
      </div>
      
      <!-- Filter Selection Section (initially hidden) -->
      <div id="deletion-filters" class="deletion-filters hidden">
        <div class="filter-section">
          <label for="deletion-year-level">Year Level:</label>
          <select id="deletion-year-level" class="deletion-filter">
            <option value="">Select Year Level</option>
            <option value="1st yr">1st Year</option>
            <option value="2nd yr">2nd Year</option>
            <option value="3rd yr">3rd Year</option>
            <option value="4th yr">4th Year</option>
          </select>
        </div>
        
        <div class="filter-section">
          <label for="deletion-trimester">Trimester:</label>
          <select id="deletion-trimester" class="deletion-filter">
            <option value="">Select Trimester</option>
            <option value="1st Trimester">1st Trimester</option>
            <option value="2nd Trimester">2nd Trimester</option>
            <option value="3rd Trimester">3rd Trimester</option>
          </select>
        </div>
        
        <div class="filter-section">
          <label for="deletion-degree">Degree:</label>
          <select id="deletion-degree" class="deletion-filter">
            <option value="">Select Degree</option>
            <option value="BSIT">BSIT - Bachelor of Science in Information Technology</option>
            <option value="BSIT(Webtech)">BSIT(Webtech) - Web Technology Specialization</option>
            <option value="BSIT(NetSec)">BSIT(NetSec) - Network Security Specialization</option>
            <option value="BSIT(ERP)">BSIT(ERP) - Enterprise Resource Planning Specialization</option>
            <option value="BSCS">BSCS - Bachelor of Science in Computer Science</option>
            <option value="BSDA">BSDA - Bachelor of Science in Data Analytics</option>
            <option value="BMMA">BMMA - Bachelor of Multimedia Arts</option>
          </select>
        </div>
      </div>
      
      <div class="deletion-summary hidden" id="deletion-summary">
        <h4>Deletion Summary</h4>
        <p id="deletion-summary-text"></p>
        <div class="warning-message">
          <strong>‚ö†Ô∏è Warning:</strong> This action cannot be undone. All related course offerings and schedules will also be deleted.
        </div>
      </div>
      
      <div class="modal-actions">
        <button id="btn-cancel-deletion" class="cancel-btn">Cancel</button>
        <button id="btn-confirm-deletion" class="delete-btn" disabled>Confirm Deletion</button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay">
    <div class="spinner"></div>
    <div class="loading-message">Processing...</div>
  </div>

  </div> <!-- End main-app -->

  <!-- Authentication Check -->
  <script>
    // Check authentication before loading the app
    if (!localStorage.getItem('authToken')) {
      window.location.href = 'login.html';
    }
  </script>

  <!-- modularized start -->
<script src="modules/color-utils.js"></script>
<script src="modules/theme-manager.js"></script>
<script src="modules/globals-utilities.js"></script>
<script src="modules/global-state-manager.js"></script>
<script src="modules/active-curriculum-manager.js"></script>
<script src="modules/startup-animation-controller.js"></script>
<script src="modules/api-wrapper-functions-for-backend-calls.js"></script>
<script src="modules/global-variables-for-room-view-columns.js"></script>
<script src="modules/jwt-expiration-monitor.js"></script>
<script src="modules/navigation.js"></script>
<script src="modules/faculty-section-removed.js"></script>
<script src="modules/courses-crud-with-search-filter-and-sort.js"></script>
<script src="modules/course-offering-crud-with-search-filter-sort-and-trimester-tabs.js"></script>
<script src="modules/loading-overlay-functions.js"></script>
<script src="modules/room-view-trimester-tabs-headers-and-tables.js"></script>
<script src="modules/room-view-modal-open-populate-and-save-with-trimester-filter.js"></script>
<script src="modules/room-management-crud.js"></script>
<script src="modules/section-view-functionality-existing.js"></script>
<script src="modules/new-section-view-trimester-tabs-headers-and-tables.js"></script>
<script src="modules/new-section-view-modal-open-populate-and-save.js"></script>
<script src="modules/enhanced-leclab-interface-functions.js"></script>
<script src="modules/enhanced-leclab-save-functions.js"></script>
<script src="modules/complementary-validation-for-lec-lab-duplicate-check.js"></script>
<script src="modules/conflict-notification-popup.js"></script>
<script src="modules/modal-show-hide.js"></script>
<script src="modules/initial-page-load.js"></script>
<script src="modules/helper-functions.js"></script>
<script src="modules/selective-deletion-modal.js"></script>
<script src="modules/analytics.js"></script>
<!-- modularized end -->
</body>
</html>